User Story Document for Cydra Social ApplicationDate: 5 Feb 2026This document is prepared by Wishtree Technologies Inc. and intended only for use by Spencer Technologies LLCTable of ContentPublic Website & Static Content	3WEB-01 | Home Page & Value Proposition	3WEB-02 | Static Legal Pages (Terms, Privacy, About)	3WEB-03 | Plan Selection Redirection Logic	3Authentication & Identity Management	4AUTH-01 | Sign Up via Email & Password	4AUTH-02 | Sign Up / Log In via Social SSO	5AUTH-03 | User Log In (Email)	5AUTH-04 | Email Verification ("Soft Gate" Access)	6AUTH-05 | Forgot Password / Reset	6AUTH-06 | User Logout	7AUTH-07 | Invite Acceptance (For Phase 2 Readiness)	7AUTH-08 | Validation & Error Feedback	7Onboarding & Workspace Management User Stories	8ONB-01 | Set Workspace Name & URL Slug	8ONB-02 | Slug Validation & Auto-Suggestions	8ONB-03 | Timezone Setup	9ONB-04 | Workspace Branding (Logo Upload)	9ONB-05 | Onboarding Completion & Subscription Handoff	10ONB-06 | Multi-Workspace Restriction (Phase 1 Logic)	10ONB-07 | Business Profile & AI Context Setup	11Social Account Integrations	11PHASE 1: Core Connectivity (Solo Plan)	12Sub-Epic 5.1: Integrations Hub & Management	12SOC-P1-01 | Social Accounts Dashboard (Settings)	12SOC-P1-02 | Solo Plan Limit Enforcement (The Gate)	12SOC-P1-03 | Disconnect Account & Draft Conversion	13Sub-Epic 5.2: Platform Connectors (OAuth)	13SOC-P1-04 | Connect LinkedIn (Page vs. Profile Selection)	13SOC-P1-05 | Connect X (Twitter)	14SOC-P1-06 | Connect Meta (Business Login)	14PHASE 2: Team & Operational Optimization	14Sub-Epic 5.3: Advanced Health & Team Limits	14SOC-P2-01 | Team Plan Limit Enforcement (10 Accounts)	14SOC-P2-02 | Token Health & Expiry Alerts	15Sub-Epic 5.4: Role-Based Access Control (RBAC)	15SOC-P2-03 | Role Restrictions (Creator vs. Admin)	15PHASE 3: Agency Scale & Governance	15Sub-Epic 5.5: Agency Scale & Enterprise Features	16SOC-P3-01 | Agency Plan Limit Enforcement (25 Accounts)	16SOC-P3-02 | Multi-Workspace Context Switching	16Public Website & Static ContentWEB-01 | Home Page & Value Proposition1. User Story: As a visitor, I want to understand what Cydra Social does and see the pricing plans, So that I can decide if I want to start a trial or subscribe.2. Description: The Home Page acts as the sales funnel. It must clearly articulate the value ("Create smarter social content") and present the subscription options. In Phase 1, while we display all plans for positioning, the primary Call to Action (CTA) drives users to the Solo Plan or Free Trial.3. Acceptance Criteria• Hero Section:    ◦ Headline: "Create smarter social content. Publish with confidence.".    ◦ Primary CTA Button: "Get Started" (Links to Sign Up -> Select Plan).    ◦ Secondary CTA Button: "View Plans" (Scrolls to Pricing Section).• Pricing Section:    ◦ Display three cards: Solo (49)∗∗,∗∗Team(99), Agency ($299).    ◦ Solo Card: CTA "Start 7-Day Trial" or "Subscribe".    ◦ Team/Agency Cards: In Phase 1, clicking these should either:        ▪ A) Lead to Sign Up (and allow selection if supported).        ▪ B) Show "Coming Soon" if strict Phase 1 limits apply (Referencing requirement, limiting to Solo is safest for MVP, but the design should show all three).• Footer: Links to About Us, Terms, Privacy, Login.WEB-02 | Static Legal Pages (Terms, Privacy, About)1. User Story: As a visitor or compliance officer, I want to view the Privacy Policy, Terms & Conditions, and About Us pages, So that I can trust the platform's legitimacy and understand how my data is handled.2. Description: These are mandatory static pages required for Stripe verification and user trust.3. Acceptance Criteria• Pages Required:    ◦ About Us: Content from "Our Story" (Frustration with blank screens, AI philosophy).    ◦ Privacy Policy: Text regarding data collection, AI content rights, and no data selling.    ◦ Terms & Conditions: Age eligibility (18+), Payment terms, and Liability disclaimers.• Navigation: Accessible via the Footer on all public pages.• SEO: Pages must be crawlable by search engines.WEB-03 | Plan Selection Redirection Logic1. User Story: As a System, I want to remember which plan the user clicked on the public site, So that I can pre-select that plan when they reach the checkout screen after signing up.2. Description: This bridges the gap between the Public Website and the Application. If a user clicks "Start Solo Trial" on the homepage, they shouldn't have to select it again after signing up.3. Acceptance Criteria• Functional Logic:    ◦ When user clicks a CTA (e.g., ?plan=solo), store this preference in the URL query parameter or LocalStorage.    ◦ User is redirected to AUTH-01 (Sign Up).    ◦ After successful Sign Up, system checks for the stored plan preference.    ◦ System redirects user directly to BILL-01 (Checkout) with the "Solo Plan" pre-selected.• Fallback: If no plan was selected (user just clicked "Sign Up"), redirect them to the Plan Selection screen inside the app to choose manually.Authentication & Identity ManagementAUTH-01 | Sign Up via Email & Password1. User Story: As a prospective user, I want to create an account using my email and a secure password, So that I can access the Cydra Social platform and begin setting up my workspace.2. Description: This is the standard registration flow. I will provide my email and create a password. The system must enforce specific security rules (8-12 alphanumeric characters) to ensure my account is secure before logging me in.3. Acceptance Criteria• Functional Logic:    ◦ I enter my email and password.    ◦ The system checks if my email is already registered.        ▪ If yes: I see an alert prompting me to Log In instead.        ▪ If no: The system creates my account and logs me in immediately.    ◦ Upon successful sign-up, I am redirected to the Onboarding/Workspace Setup page.    ◦ The system automatically sends a verification email to my inbox (triggering AUTH-04).• Validations:    ◦ Email: Must be a valid format (e.g., user@domain.com).    ◦ Password: Must be 8-12 characters long and contain Alphanumeric characters only (A-Z, 0-9).    ◦ Terms: I must check a box to agree to Terms & Conditions.• Field Matrix:Field LabelPlaceholderHelper TextMandatoryEmail Addressname@business.com—YesPasswordCreate a passwordMust be 8-12 alphanumeric characters.YesAgree to Terms—I agree to the Terms of ServiceYesSign Up Button——N/AAUTH-02 | Sign Up / Log In via Social SSO1. User Story: As a user, I want to sign up or log in using my existing Meta, LinkedIn, Google, or X account, So that I can access the platform quickly without remembering another password.2. Description: I want to use my business credentials from other platforms to authenticate. Specifically, I need to be able to use Meta Business Login to ensure my future Facebook/Instagram connections work smoothly.3. Acceptance Criteria• Functional Logic:    ◦ I click "Continue with [Provider]".    ◦ I am redirected to the provider's OAuth permission screen.    ◦ New User: If I don't have an account, the system creates one using my social email and logs me in.    ◦ Existing User: If I already have an account with that email, the system logs me in.    ◦ Meta Specifics: The flow must utilize the Meta Business Login standard.• UI Elements:    ◦ Buttons: "Continue with Meta Business," "Continue with LinkedIn," "Continue with Google," "Continue with X".• Edge Case:    ◦ If the social provider does not share my email (e.g., privacy settings), the system prompts me to enter an email address manually to complete the profile.AUTH-03 | User Log In (Email)1. User Story: As a returning user, I want to log in using my email and password, So that I can resume managing my content.2. Description: I need to access my existing account. If I enter the wrong credentials, the system should give me a generic error for security purposes.3. Acceptance Criteria• Functional Logic:    ◦ I enter email and password.    ◦ If credentials match, I am redirected to the Dashboard.    ◦ If I have not completed onboarding, I am redirected to Workspace Setup.    ◦ If authentication fails, I see a generic error message ("Invalid email or password").• Field Matrix:    ◦ Label: Email Address | Placeholder: name@business.com    ◦ Label: Password | Placeholder: Enter your password    ◦ Link: Forgot Password?AUTH-04 | Email Verification ("Soft Gate" Access)1. User Story: As a newly registered user, I want to verify my email address via a link sent to my inbox, So that I can unlock publishing features (Posting/Scheduling).2. Description: After signing up, I can access the dashboard immediately to look around ("Read-Only"), but I cannot post content until I prove my email is valid.3. Acceptance Criteria• Functional Logic:    ◦ Unverified State:        ▪ I can view the Dashboard, Settings, and Calendar.        ▪ I see a global banner: "Please verify your email to start posting."        ▪ If I click "Create Post" or "Schedule," the system blocks the action and shows a modal: "Email Verification Required."    ◦ Verification Action:        ▪ I click the link in the email.        ▪ The system confirms verification and removes the banner/blocks.    ◦ Expiry: The link in my email is valid for 24 hours.    ◦ Resend: I can click "Resend Verification Email" from the dashboard banner if the link expires.AUTH-05 | Forgot Password / Reset1. User Story: As a user who forgot their credentials, I want to reset my password via a secure email link, So that I can regain access to my account.2. Description: I need a self-serve way to recover my account. The new password I set must adhere to the same strict security policy as sign-up.3. Acceptance Criteria• Functional Logic:    ◦ I enter my email on the "Forgot Password" page.    ◦ The system displays a confirmation message: "If an account exists, we have sent a reset link." (Security best practice).    ◦ I receive an email with a link valid for 24 hours.    ◦ I click the link and land on the "Reset Password" page.    ◦ I enter a new password that meets the 8-12 alphanumeric requirement.• Field Matrix (Reset Page):    ◦ Label: New Password | Validation: 8-12 Alphanumeric.    ◦ Label: Confirm New Password | Validation: Must match exactly.AUTH-06 | User Logout1. User Story: As a user, I want to log out of the application, So that I can close my session securely.2. Description: I need to ensure my account is safe, especially if I am on a shared computer.3. Acceptance Criteria• Functional Logic:    ◦ I click "Log Out" in the profile dropdown.    ◦ The system destroys my active session.    ◦ I am redirected to the Public Homepage or Login Screen.    ◦ I cannot use the browser "Back" button to access the dashboard again without logging back in.AUTH-07 | Invite Acceptance (For Phase 2 Readiness)1. User Story: As a user invited to a workspace, I want to click the link in my invitation email to set up my account, So that I can join the team workspace immediately.2. Description: While Phase 1 is focused on Solo users, the system supports inviting members (as per Admin requirements). I need to accept an invite and set my password without having to "Create a Workspace" myself.3. Acceptance Criteria• Functional Logic:    ◦ I click the "Join Workspace" link in my email.    ◦ I land on a Sign-Up page where my Email is pre-filled and locked (read-only).    ◦ I create a password (8-12 alphanumeric).    ◦ Upon success, I am directed straight to the Dashboard of the shared workspace (skipping the "Create Workspace" onboarding step).AUTH-08 | Validation & Error Feedback1. User Story: As a user, I want to see clear error messages when I make a mistake, So that I can fix my input and proceed quickly.2. Description: I need immediate feedback if I enter an invalid email or a weak password.3. Acceptance Criteria• Functional Logic:    ◦ Real-time Validation: If I type a password with a special character (e.g., "Pass!"), the field turns red, and I see: "Password must contain letters and numbers only."    ◦ Length Check: If I type fewer than 8 or more than 12 characters, I see: "Password must be 8-12 characters."    ◦ Offline State: If I try to log in without an internet connection, I see a "Network Error" message rather than a browser crash page.Onboarding & Workspace Management User StoriesONB-01 | Set Workspace Name & URL Slug1. User Story: As a new user, I want to name my workspace and claim a unique URL slug (e.g., cydra.social/brand), So that I can establish my business identity on the platform.2. Description: Upon first login, the user must define their workspace. This creates the "container" for all future content, social connections, and billing. The system must generate a URL-friendly "slug" based on the workspace name and ensure it is unique across the entire Cydra platform.3. Acceptance Criteria• Functional Logic:    ◦ User enters a "Workspace Name" (e.g., "Wishtree Consulting").    ◦ System auto-generates a slug in real-time (e.g., wishtree-consulting).    ◦ User can manually edit the slug field.    ◦ Uniqueness Check: System validates availability against the database workspaces table.• Validations:    ◦ Name: Max 50 characters. Alphanumeric + spaces allowed.    ◦ Slug: Lowercase alphanumeric and hyphens (-) only. No spaces. Max 30 chars.• Field Matrix:Field LabelPlaceholderHelper TextMandatoryWorkspace Namee.g., Acme AgencyYour business or brand name.YesWorkspace URLcydra.social/letters, numbers, and dashes only.YesONB-02 | Slug Validation & Auto-Suggestions1. User Story: As a user, I want to receive automatic suggestions if my desired workspace URL is already taken, So that I can quickly find a valid alternative without guessing.2. Description: Since workspace slugs must be globally unique, collisions will happen. Instead of just showing an error, the system must proactively suggest alternatives (similar to Gmail username selection) as requested in the Requirement Gathering document.3. Acceptance Criteria• Functional Logic:    ◦ Trigger: Fires onBlur (when user leaves the slug field) or after a 500ms debounce while typing.    ◦ Scenario: Available        ▪ Show a green checkmark or "Available" badge.    ◦ Scenario: Unavailable        ▪ Show error: "That URL is already taken."        ▪ Auto-Suggest Logic: Display 3 clickable alternatives based on the input.            • Input: wishtree            • Suggestions: wishtree1, wishtree-hq, wishtree-official    ◦ Action: Clicking a suggestion automatically populates the Slug field and clears the error.ONB-03 | Timezone Setup1. User Story: As a user, I want to set my workspace's default timezone, So that my scheduled posts go live at the correct local time.2. Description: Timezone accuracy is critical for a scheduling tool. This setting will govern the default "Schedule" time in the editor.3. Acceptance Criteria• Functional Logic:    ◦ Auto-Detect: On page load, try to detect the user's browser timezone and pre-select it in the dropdown.    ◦ Selection: User can search and select a different timezone from a standard list (e.g., "EST - New York", "GMT - London").    ◦ Storage: Save as the workspace_default_timezone in the database.• Field Matrix:    ◦ Label: Timezone    ◦ Type: Dropdown (Searchable)    ◦ Default: Browser Timezone (e.g., America/New_York)    ◦ Mandatory: YesONB-04 | Workspace Branding (Logo Upload)1. User Story: As a user, I want to upload my brand’s logo, So that I can visually distinguish my workspace in the dashboard and personalize my environment.2. Description: This serves as the visual identifier for the Workspace. In Phase 1, it replaces the default avatar in the UI navigation. In Phase 2, it becomes the primary navigation cue for multi-client switching.3. Acceptance Criteria• Functional Logic:    ◦ User clicks "Upload Logo".    ◦ System opens native file picker.    ◦ Preview: Display a circular preview of the uploaded image immediately.    ◦ Storage: Upload the asset to AWS S3 (as per architecture) and associate the URL with the workspace.• Validations:    ◦ File Type: JPG, PNG.    ◦ File Size: Max 2MB (Phase 1 limit to save storage costs).    ◦ Dimensions: Minimum 200x200px.• Edge Case:    ◦ If user skips this, auto-generate an avatar using the initials of the Workspace Name (e.g., "WC" for Wishtree Consulting).ONB-05 | Onboarding Completion & Subscription Handoff1. User Story: As a System, I want to save the workspace data and redirect the user to the pricing page, So that I can enforce the "Subscription First" workflow.2. Description: This is the "submit" action for the Onboarding module. It connects Epic 2 (Onboarding) to Epic 6 (Subscription).3. Acceptance Criteria• Functional Logic:    ◦ User clicks "Continue" or "Next Step" on the onboarding form.    ◦ Backend Action:        1. Create Workspace record in PostgreSQL.        2. Link current User ID as Role: WORKSPACE_ADMIN for this workspace.        3. Set status to Active.    ◦ Redirection Logic:        ▪ Scenario A (Plan Pre-selected): If the user clicked "Start Solo Trial" on the public site (Epic 0), redirect directly to Stripe Checkout for the Solo Plan.        ▪ Scenario B (No Plan): Redirect to the Plan Selection Screen (displaying Solo, Team, Agency).• Validation:    ◦ Prevent progression if Name, Slug, or Timezone are missing.ONB-06 | Multi-Workspace Restriction (Phase 1 Logic)1. User Story: As a System, I want to prevent Phase 1 "Solo" users from creating a second workspace, So that I can enforce the "1 User = 1 Workspace" limit defined in the requirements.2. Description: The requirement docs state that Phase 1 is strictly "1-to-1 per account for solo".3. Acceptance Criteria• Functional Logic:    ◦ If a user who already owns a workspace attempts to access the "Create Workspace" route/URL:        ▪ Redirect them to their existing Dashboard (if paid).        ▪ Or redirect them to the "Billing" page (if unpaid).    ◦ UI: Do not show a "Create New Workspace" button in the profile dropdown for Solo users.    ◦ Exception: This restriction will be lifted in Phase 2 for "Agency" plans, so the backend code should be modular (e.g., if (user.workspaces.count >= plan.limit) { block }).ONB-07 | Business Profile & AI Context Setup1. User Story: As a new user, I want to provide details about my business, industry, and target audience, So that the AI generates content that actually sounds like me and appeals to my customers.2. Description: This step captures the "Static Context" that will be injected into every AI prompt. This creates a "set it and forget it" experience where the user doesn't have to repeat "I am a marketing agency" in every single prompt.3. Acceptance Criteria• Functional Logic:    ◦ Displayed immediately after Workspace Name/Slug creation.    ◦ Data is stored in the workspaces table.    ◦ Skip Logic: Users can skip this step (to reduce friction), but a "completeness meter" should encourage them to fill it out for better results.• Field Matrix:Field LabelPlaceholderHelper TextData TypeMandatoryIndustry / Nichee.g., SaaS, Legal, HealthHelps AI understand your market.Dropdown + CustomYesBusiness Descriptione.g., We help startups scale...What do you do? (Max 500 chars)Text AreaYesTarget Audiencee.g., CTOs, Busy MomsWho are you talking to?Text InputNoBrand ToneSelect tone...How should your posts sound?DropdownNoWebsitehttps://URLNo• Dropdown Options (Tone): Professional, Casual, Enthusiastic, Authoritative, Witty, Empathetic.• Dropdown Options (Industry): Marketing, Technology, Real Estate, Coaching, Law, Finance, Healthcare, Retail, Other.Social Account IntegrationsPHASE 1: Core Connectivity (Solo Plan)Focus: Establishing the foundational OAuth pipes, handling the "1 User = 1 Workspace" logic, and enforcing the strict 3-account limit.Sub-Epic 5.1: Integrations Hub & ManagementSOC-P1-01 | Social Accounts Dashboard (Settings) 1. User Story: As a Workspace Admin, I want to view a list of connected social accounts within my Workspace Settings, So that I can see which profiles are active and monitor my plan limits.2. Description: The central hub for integrations. It must visually reinforce that these connections apply only to the current workspace. It displays the specific connected entities (e.g., "Company Page" vs "Personal Profile") and the connection status.3. Acceptance Criteria• Functional Logic:    ◦ Location: Navigate to Sidebar > Settings > Connected Accounts.    ◦ Context: Query database for connections linked strictly to the current active_workspace_id.    ◦ List View: Display cards for LinkedIn, X (Twitter), and Meta.    ◦ States:        ▪ Not Connected: Enable "Connect" button.        ▪ Connected: Show Platform Logo + Profile Avatar + Handle/Name + "Active" Badge.        ▪ Error: Show "Expired" Red Badge (if token is invalid).    ◦ Counter: Display "Accounts Connected: [Current Count] / 3".• UI Elements:    ◦ Header: "Connected Accounts".    ◦ Helper Text: "Connect your social profiles to start scheduling. Solo Plan limit: 3 accounts."SOC-P1-02 | Solo Plan Limit Enforcement (The Gate) 1. User Story: As a Solo Plan user, I want to be notified if I try to exceed my 3-account limit, So that I understand the value of upgrading to the Team plan.2. Description: The monetization trigger. The Solo plan is hard-capped at 3 accounts. This logic runs before any OAuth process starts.3. Acceptance Criteria• Functional Logic:    ◦ Trigger: User clicks "Connect" on any platform card.    ◦ Check: IF (Count(social_connections) >= 3) THEN Block Action.    ◦ UI Response: Open Upgrade Modal (do not redirect to social network).        ▪ Headline: "You've reached the Solo limit."        ▪ Body: "The Solo plan supports up to 3 social accounts. Upgrade to Team to connect up to 10 accounts."        ▪ Primary Button: "Join Team Waitlist" (Phase 1) OR "Upgrade to Team" (Phase 2).        ▪ Secondary Button: "Cancel".SOC-P1-03 | Disconnect Account & Draft Conversion 1. User Story: As a Workspace Admin, I want to disconnect a social account, So that I can remove unused profiles or fix a corrupted connection.2. Description: Destructive action handling. If a user removes an account, we must ensure "Scheduled" posts don't fail silently or hang in the system.3. Acceptance Criteria• Functional Logic:    ◦ Action: Click "Trash/Disconnect" icon on a connected row.    ◦ Confirmation Modal: "Are you sure? This will disconnect [Account Name]. Any scheduled posts for this account will be moved to Drafts."    ◦ Backend Process:        1. Delete the token record from social_connections.        2. Query posts table for status = 'SCHEDULED' AND account_id = [Deleted ID].        3. Update these posts to status = 'DRAFT'.        4. Log internal history: "Reverted to draft via account disconnect."    ◦ Feedback: Show Toast Message: "Account disconnected. [X] scheduled posts moved to Drafts."Sub-Epic 5.2: Platform Connectors (OAuth)SOC-P1-04 | Connect LinkedIn (Page vs. Profile Selection) 1. User Story: As a user, I want to connect a specific LinkedIn Company Page or my Personal Profile, So that I can publish to the correct professional entity.2. Description: Standard OAuth flow. Crucially, Cydra must force the user to select specific pages to import. Per pricing docs, a Profile and a Page count as two separate accounts.3. Acceptance Criteria• Functional Logic:    ◦ Step 1: Click "Connect LinkedIn" -> Redirect to LinkedIn OAuth.    ◦ Step 2: User grants permissions (w_organization_social, r_liteprofile, w_member_social).    ◦ Step 3 (Import Modal):        ▪ System fetches the user's Profile AND all Administered Pages.        ▪ UI displays list with checkboxes.        ▪ Constraint: User can select multiple.        ▪ Counting: Each checked box increments the Account Counter by 1.    ◦ Step 4: Store unique URN (ID) and Token for each selected entity against the Workspace.SOC-P1-05 | Connect X (Twitter)1. User Story: As a user, I want to connect my X (Twitter) account, So that I can schedule tweets.2. Description: Standard OAuth flow for X.3. Acceptance Criteria• Functional Logic:    ◦ Step 1: Click "Connect X" -> Redirect to Twitter OAuth.    ◦ Step 2: Authorize App -> Callback to Cydra.    ◦ Step 3: Store oauth_token and oauth_token_secret.    ◦ Validation: Check if this specific X Handle is already connected to this Workspace. If yes, show error: "Account already connected."SOC-P1-06 | Connect Meta (Business Login) 1. User Story: As a user, I want to connect Facebook Pages and Instagram Business accounts via Meta Business Login, So that I can manage my Meta portfolio.2. Description: Required Day 1 feature per Requirement Gathering. Uses the specific Meta Business Login flow to retrieve multiple assets from one login.3. Acceptance Criteria• Functional Logic:    ◦ Step 1: Click "Connect Meta" -> Launch Facebook Business Popup.    ◦ Step 2: User selects specific Facebook Pages and Instagram Accounts in the Meta UI.    ◦ Step 3 (Cydra Import Modal):        ▪ Display the assets returned by the token.        ▪ Example: "Found: Nike FB Page, Nike Instagram."        ▪ User confirms import.    ◦ Counting: 1 FB Page = 1 Account. 1 IG Account = 1 Account.    ◦ Validation: Reject Personal Instagram profiles (API restriction). Must be Business/Creator.PHASE 2: Team & Operational OptimizationFocus: Expanding limits to 10 accounts, introducing Role-Based Access (RBAC), and automated health checks.Sub-Epic 5.3: Advanced Health & Team LimitsSOC-P2-01 | Team Plan Limit Enforcement (10 Accounts) 1. User Story: As a Team Plan user, I want to connect up to 10 social accounts, So that I can manage my brand's diverse presence.2. Description: Updates the limit logic for the $99/mo plan.3. Acceptance Criteria• Functional Logic:    ◦ Update Max_Accounts validation rule to 10 for Workspaces on Team Plan.    ◦ Upgrade Trigger: If user attempts 11th connection, show Agency Upgrade Modal ($299/mo).SOC-P2-02 | Token Health & Expiry Alerts 1. User Story: As a Workspace Admin, I want to see a visual alert when a social connection expires, So that I can reconnect it before posts fail.2. Description: Proactive monitoring. Social tokens expire (e.g., LinkedIn every 60 days). Phase 2 introduces automated detection to prevent "Silent Failures".3. Acceptance Criteria• Functional Logic:    ◦ Detection: System flags connections returning 401 Unauthorized or uses a background job to check expiry dates.    ◦ Database: Update connection_status = EXPIRED.    ◦ UI (Settings): Change badge to Red "Reconnect Required".    ◦ UI (Dashboard): Global Banner: "Action Required: Reconnect [LinkedIn Account] to resume publishing."    ◦ Action: "Reconnect" button re-triggers OAuth flow to refresh token.Sub-Epic 5.4: Role-Based Access Control (RBAC)SOC-P2-03 | Role Restrictions (Creator vs. Admin) 1. User Story: As a Workspace Admin, I want to prevent Creators from deleting social connections, So that my integration setup remains stable.2. Description: Enforcing the "Creator" vs. "Admin" permissions defined in the Team Plan.3. Acceptance Criteria• Functional Logic:    ◦ Creator Role:        ▪ Can view connected accounts in the Post Editor (to select them for posting).        ▪ Cannot access Settings > Connected Accounts.    ◦ Admin Role: Full access to Connect/Disconnect.    ◦ Security: If a Creator manually navigates to the Settings URL, redirect to Dashboard with "Access Denied."PHASE 3: Agency Scale & GovernanceFocus: High-volume management (25 accounts), multi-workspace context switching, and White Labeling.Sub-Epic 5.5: Agency Scale & Enterprise FeaturesSOC-P3-01 | Agency Plan Limit Enforcement (25 Accounts)1. User Story: As an Agency Admin, I want to connect up to 25 social accounts, So that I can manage complex client portfolios.2. Description: Updates the limit logic for the $299/mo plan.3. Acceptance Criteria• Functional Logic:    ◦ Update Max_Accounts validation rule to 25 for Workspaces on Agency Plan.    ◦ Overage: If user needs >25, prompt to "Add Additional Workspace" or "Contact Sales".SOC-P3-02 | Multi-Workspace Context Switching1. User Story: As an Agency User managing 5 clients, I want the Connected Accounts list to update instantly when I switch Workspaces, So that I never accidentally post content to the wrong client.2. Description: Visual enforcement of the architecture. When the user switches the "Global Workspace Context" in the nav bar, the Settings page must refresh immediately.3. Acceptance Criteria• Functional Logic:    ◦ Action: User toggles "Nike" to "Adidas" in top navigation.    ◦ System: Triggers a re-fetch of the social_connections list based on the new workspace_id.    ◦ Verification: Ensure "Nike" tokens are completely hidden/inaccessible in the "Adidas" session context.Subscription & BillingPHASE 1: Core Monetization (Solo Plan Focus)Focus: Successfully capturing payment for the single available plan ($49/mo) and gathering necessary compliance data.BILL-P1-01 | Plan Selection Screen (Solo Plan Focus)1. User Story: As a new user, I want to view the available subscription options and select the Solo Plan, So that I can understand the pricing and activate my account.2. Description: After Onboarding (Epic 2), the user lands here. In Phase 1, we only sell the Solo Plan ($49). However, to show product value and future growth, Team and Agency plans must be visible but disabled or acting as "Waitlist" triggers.3. Acceptance Criteria• Functional Logic:    ◦ Display: Show three pricing cards: Solo, Team, Agency.    ◦ Solo Card:        ▪ Price: $49/month.        ▪ Features: 1 User, 1 Workspace, 50 AI Credits, 3 Social Accounts.        ▪ Action: "Subscribe" or "Start 7-Day Trial" button (Primary CTA).    ◦ Team / Agency Cards:        ▪ Display Prices ($99 / $299) and features for comparison.        ▪ Action: Button says "Join Waitlist" or "Coming Soon". Clicking this opens a modal capturing their email interest (Lead Gen for Phase 2).    ◦ Toggle: Hide the "Monthly/Yearly" toggle if only Monthly is available in Phase 1.• UI Elements:    ◦ Headline: "Choose the plan that fits your growth."    ◦ Solo Highlight: Badge "Best for Individuals".BILL-P1-02 | Stripe Checkout (Credit Card Upfront)1. User Story: As a user, I want to enter my credit card details securely via Stripe, So that I can authorize my subscription or free trial.2. Description: Integration with Stripe Checkout. As per requirements, even the 7-Day Free Trial requires a Credit Card Upfront to prevent abuse and reduce friction at the end of the trial.3. Acceptance Criteria• Functional Logic:    ◦ Handoff: User clicks "Start Trial" on Solo Plan -> Redirect to Stripe Hosted Checkout.    ◦ Data Passed: Pass User_Email, Workspace_ID, and Plan_ID to Stripe metadata.    ◦ Validation: Stripe handles card number, CVC, and Zip code validation.    ◦ Trial Logic:        ▪ If Trial selected: Authorize 0.00immediately.Schedulefirstchargeof∗∗49.00** after 7 days.        ▪ If Immediate Buy: Charge $49.00 immediately.    ◦ Failure State: If card is declined, show Stripe error. User cannot proceed to Dashboard without a valid method.BILL-P1-03 | Billing Compliance (Tax & Legal Data)1. User Story: As a business user, I want to enter my Legal Business Name and Tax Address, So that my future invoices are valid for tax deductions.2. Description: To meet the "Invoice View" requirement and compliance standards (US/UK/EU), we must capture the legal entity details. This is best done during the Stripe flow (using Stripe Tax features) or a pre-step.3. Acceptance Criteria• Functional Logic:    ◦ Collection: Inside Stripe Checkout, enable fields for "Tax ID" and "Billing Address".    ◦ Storage: Sync this data back to billing_profiles table in Cydra via Webhook.    ◦ Validation: Address fields are mandatory. Tax ID is optional (unless required by region).• Field Matrix:Field LabelPlaceholderMandatoryName on InvoiceLegal Business NameYesBilling AddressStreet, City, ZipYesCountrySelect CountryYesVAT / Tax IDe.g. GB123456789No (Optional)BILL-P1-04 | Subscription Activation & Provisioning1. User Story: As a System, I want to provision the workspace instantly upon payment success, So that the user can start using the platform immediately.2. Description: The "handshake" between Stripe and Cydra. This ensures the user gets their "Active" status and AI credits immediately.3. Acceptance Criteria• Functional Logic:    ◦ Trigger: Webhook checkout.session.completed received from Stripe.    ◦ Database Updates:        1. Set subscription_status = active (or trialing).        2. Set current_period_end = Date + 30 Days.        3. Credit Allocation: Set ai_credits_balance = 50 (Solo Limit).    ◦ UI Redirection:        ▪ Show "Success! Setting up your workspace..." loader.        ▪ Redirect user to Dashboard.    ◦ Email: Trigger "Welcome / Receipt" email.BILL-P1-05 | Manage Subscription (Stripe Portal)1. User Story: As a subscriber, I want to access a billing portal, So that I can download past invoices, update my card, or cancel.2. Description: Instead of building a custom billing UI in Phase 1, we will link to the Stripe Customer Portal. This satisfies the requirement for "Invoice Access".3. Acceptance Criteria• Functional Logic:    ◦ Navigation: Settings > Billing > "Manage Subscription".    ◦ Action: Generate secure one-time link to Stripe Portal.    ◦ Capabilities (Stripe Native):        ▪ Download PDF Invoices.        ▪ Update Credit Card.        ▪ Cancel Subscription.    ◦ Cancellation Logic: If user cancels, set cancel_at_period_end = true. Allow access until the billing cycle ends.BILL-P1-06 | Purchase Extra AI Credits (Top-Up)1. User Story As a Solo User, I want to purchase a one-time pack of AI credits, So that I can continue generating content when I hit my monthly limit of 50.2. Description This enables "Consumable" billing in Stripe. These are one-off charges, not subscription changes.3. Acceptance Criteria• Functional Logic:    ◦ Trigger: User clicks "Buy Credits" (visible in Billing or Editor when low on credits).    ◦ Selection Modal: Display options defined in Pricing:        ▪ 50 Credits for $15 (One-time).        ▪ 100 Credits for $25 (One-time).    ◦ Checkout: Trigger Stripe Payment Intent (Immediate charge).    ◦ Provisioning:        ▪ On success, increment ai_credits_balance by +50 or +100.        ▪ Do not change the recurring subscription price.    ◦ Expiry Logic: Credits roll over until used OR reset at end of month (Must be defined in business logic; standard MVP is reset monthly, but paid top-ups usually persist. Assumption: Paid top-ups do not expire for MVP friendliness).• UI Elements:    ◦ Button: "Top Up Credits"    ◦ Labels: "50 Credits (15)"∣"100Credits(25)"PHASE 2: Operational Optimization (Team Plan)Focus: Enabling self-serve upgrades, handling prorations, and managing seat-based billing.BILL-P2-01 | Self-Serve Upgrade (Solo to Team)1. User Story: As a Solo user, I want to upgrade to the Team Plan directly from the dashboard, So that I can invite my colleagues and access approval workflows.2. Description: Moving from the $49 plan to the $99 plan. Requires handling proration (paying the difference).3. Acceptance Criteria• Functional Logic:    ◦ Trigger: User clicks "Upgrade" on Billing page OR hits a limit (e.g., 4th social account).    ◦ Checkout: Show Stripe Confirmation for $99/month.    ◦ Proration Calculation: Stripe automatically calculates the difference (e.g., if upgrading halfway through the month, pay ~$25 extra).    ◦ Provisioning:        ▪ Update Plan ID to TEAM.        ▪ Increase AI Credits to 150.        ▪ Unlock "Team Settings" and "User Management" in UI.BILL-P2-02 | Add User Seats (Per-Seat Billing)1. User Story As a Team Admin, I want to purchase additional user seats for $15/month, So that I can add a 6th team member without upgrading to the Agency plan.2. Description The Team plan includes 5 users. Users 6+ are charged as recurring add-ons.3. Acceptance Criteria• Functional Logic:    ◦ Trigger: Admin attempts to invite a user when current_users == 5.    ◦ Modal: "You have used all 5 included seats. Add a new seat for $15/month?"    ◦ Action:        ▪ Calculate Proration for the remainder of the current month.        ▪ Charge card immediately for prorated amount.        ▪ Update Stripe Subscription quantity: seats_addon_qty + 1.    ◦ Recurring: Next month's invoice will include the extra $15 automatically.    ◦ Removal: If a user is removed, the seat remains "open" until the admin explicitly "Remove Seat" in billing to lower the subscription cost.BILL-P2-03 | Extra AI Credit Top-Ups1. User Story: As a user, I want to buy a one-time pack of AI credits, so that I can continue generating content if I run out before the month ends.2. Description: One-off purchases (consumables) rather than a subscription change.3. Acceptance Criteria• Functional Logic:    ◦ Trigger: User clicks "Buy Credits" in the editor or billing page.    ◦ Options:        ▪ 75 Credits ($15).        ▪ 100 Credits ($25).    ◦ Payment: One-time charge via Stripe.    ◦ Provisioning: Immediately add +75 to ai_credits_balance. Assumption: Roll over or use first. Source says "Credits reset monthly" which implies use-it-or-lose-it, but top-ups usually carry over. Decision: Top-ups expire at end of cycle to keep logic simple per MVP).PHASE 3: Scale & Governance (Agency Plan)Focus: High-value transitions, Agency pricing, and White Label add-ons.BILL-P3-01 | Upgrade to Agency Plan1. User Story: As a Team Admin, I want to upgrade to the Agency Plan ($299/mo), So that I can manage multiple client workspaces.2. Description: Unlocks the highest tier: 5 Workspaces, 15 Users, 500 Credits.3. Acceptance Criteria• Functional Logic:    ◦ Provisioning:        ▪ Update Plan to AGENCY.        ▪ Set Workspace Limit = 5.        ▪ Set User Limit = 15.        ▪ Set AI Credits = 500.        ▪ Unlock "Switch Workspace" UI.BILL-P3-02 | Add Additional Workspace (Agency Add-on)1. User Story As an Agency Admin, I want to purchase an additional workspace for $39/month, So that I can onboard a new client beyond my included limit of 5.2. Description Agency plan includes 5 workspaces. Workspaces 6+ are recurring add-ons.3. Acceptance Criteria• Functional Logic:    ◦ Trigger: Admin clicks "Create Workspace" when workspace_count >= 5.    ◦ Modal: "Limit Reached. Add an additional client workspace for $39/month?"    ◦ Action:        ▪ Calculate Proration.        ▪ Charge card immediately.        ▪ Update Stripe Subscription: workspace_addon_qty + 1.        ▪ Provision the new blank Workspace immediately.• UI Elements:    ◦ Label: "Additional Workspace ($39/mo)"BILL-P3-03 | White-Label Branding Subscription1. User Story: As an Agency Admin, I want to subscribe to the White-Label Add-on ($99/mo), So that I can remove Cydra branding from my client reports.2. Description: An optional monthly recurring add-on specific to the Agency tier.3. Acceptance Criteria• Functional Logic:    ◦ Visibility: Only visible to users on AGENCY plan.    ◦ Action: Toggle "Enable White Labeling" in Billing.    ◦ Charge: Add $99/mo to recurring subscription.    ◦ Effect: Enables "Branding Settings" where user can upload custom logo for reports/emails.Core Content Creation (MVP)STORY: CONT-01 | Manual Editor with Platform-Specific Limits1. User Story As a Creator, I want to type my post content and see a live character countdown, So that I can ensure my post fits the limits of LinkedIn or X without getting rejected.2. Description The core text input area. It must dynamically adjust constraints based on the selected platforms. If the user selects X (Twitter), the limit is 280 characters. If LinkedIn, 3,000. If both are selected, the system must enforce the strictest limit to ensure successful cross-posting.3. Acceptance Criteria• Functional Logic:    ◦ Platform Selection: User selects target account(s) (e.g., LinkedIn Profile, X Account) from a dropdown/toggle at the top.    ◦ Limit Calculation:        ▪ If X is selected: Limit = 280 (Free Tier constraint),.        ▪ If LinkedIn is selected: Limit = 3,000.        ▪ If Both are selected: Enforce 280 (Lowest Common Denominator).    ◦ Hard Block: The text area must prevent typing beyond the limit.    ◦ Visual Cues:        ▪ Green: < 80% used.        ▪ Yellow: 80-95% used.        ▪ Red: 95-100% used.    ◦ Truncation Warning: If text exceeds ~210 chars (LinkedIn) or ~280 chars (X), show a visual marker indicating where the "See More" fold will occur.• Field Matrix: Field LabelField TypePlaceholderMandatoryValidation / LogicSelect PlatformsMulti-Select DropdownSelect platforms...YesUser must select at least one (LinkedIn or X). <br>Selection triggers the character limit calculation.Post ContentText Area (Rich Text)What do you want to share?YesMax Length: Dynamic. <br>• If X selected: 280 chars. <br>• If LinkedIn selected: 3,000 chars. <br>• If Both: 280 chars. <br>Hard Block: User cannot type past limit.Character CounterDisplay Label0 / 280N/AUpdates in real-time. <br>Turns Red at 95% usage.• Edge Case:    ◦ Paste Overflow: If user pastes a 1,000-character block into an X-only post, the text is truncated at 280 chars immediately, and a toast warning appears: "Text truncated to fit X limit."CONT-02 | AI Content Generation (n8n Integration)1. User Story As a Creator, I want to generate a post draft using AI based on a short topic, So that I can overcome writer's block and maintain a professional tone.2. Description The "Generate" button triggering the n8n webhook. It must inject the Workspace Context (Industry, Audience, Tone) defined during Onboarding to ensure the output is personalized.3. Acceptance Criteria• Functional Logic:    ◦ Input: User enters a topic/prompt (e.g., "Tips for remote work").    ◦ Context Injection: System retrieves Workspace_Profile (Industry, Audience, Tone) from DB and appends to the n8n payload.    ◦ Credit Check:        ▪ Check ai_credits_balance > 0.        ▪ If Yes: Send Prompt -> Deduct 1 Credit on success.        ▪ If No: Show "Out of Credits" modal with upgrade/top-up options.    ◦ Output: Populate the "Post Body" text area with the result.    ◦ Retry Logic: If n8n times out (e.g., >30s), show "AI is taking too long. Please try again or write manually.". Do not deduct credit on failure.• UI Elements:    ◦ Button: “Generate with AI"    ◦ Credit Counter: "Credits: 45/50" (Visible near the button).• Field Matrix: Field LabelField TypePlaceholderMandatoryValidation / LogicTopic / IdeaText Inpute.g., "3 tips for remote leadership"YesMax 500 characters. <br>Used as the primary prompt for n8n.Workspace ContextHidden System FieldN/AYesInjected automatically from Workspace Settings (Industry, Tone, Audience). <br>If empty, AI defaults to "Professional".Generate ButtonAction ButtonGenerate DraftN/ADisabled if ai_credits_balance = 0. <br>Disabled if Topic is empty.CONT-03 | Image Handling (Per Post)1. User Story As a user, I want to upload an image (JPG/PNG) to attach to my post, So that I can increase engagement on my social feeds.2. Description Manual media handling per post. Users can upload images from their local device.3. Acceptance Criteria• Functional Logic:    ◦ Upload: Click "Add Image" -> System File Picker.    ◦ Preview: Display thumbnail of the image below the text area with an "X" button to remove.    ◦ Storage: Upload to AWS S3; return URL to frontend.    ◦ Validation Rules:        ▪ File Type: JPG, PNG.        ▪ File Size: Max 5MB (Strict limit to prevent X API failures).        ▪ Count: Single Image per post (Phase 1 simplification).    ◦ Error Handling: If file > 5MB, show modal: "File too large. Please compress to under 5MB.".• Field Matrix: Field LabelField TypePlaceholderMandatoryValidation / LogicAdd MediaButton / File PickerN/ANoFile Types: .jpg, .png only (No GIFs/Video in Phase 1). <br>Max Size: 5MB (Strict X API limit). <br>Quantity: 1 Image per post.Alt TextText InputDescribe this image...NoMax 1,000 characters. <br>Used for accessibility on LinkedIn/X.Remove ImageIcon Button (X)N/AN/AClears the uploaded file and resets the input.CONT-04 | Auto-Save & Draft Management1. User Story As a user, I want my work to save automatically while I type, So that I don't lose progress if my browser crashes or internet fails.2. Description Background draft synchronization ensuring data safety.3. Acceptance Criteria• Functional Logic:    ◦ Trigger:        1. Time-based: Every 30 seconds of inactivity or typing,.        2. Manual: "Save Draft" button clicked.        3. Navigation: User attempts to leave the page (Prompt: "Saving...").    ◦ State: Post status = DRAFT in database.    ◦ Feedback: Small indicator text: "Saved at [Time]" or "Saving..." spinner.    ◦ Offline Handling: If internet is lost, show "Offline - Changes not saved" banner,.• Field Matrix: (Note: This is a system behavior, but visual status fields apply)UI ElementField TypeDefault StateLogicSave StatusText Indicator"Saved"States: <br>• "Saving..." (Spinner) <br>• "Saved at [Time]" (Gray text) <br>• "Save Failed" (Red text + Retry icon)Last EditedTimestampN/AUpdates on every successful database sync (30s interval).PHASE 2: Operational Optimization (Team Plan)CONT-P2-01 | Approval Submission Flow1. User Story As a Creator, I want to submit my draft for approval instead of publishing it, So that my manager can review it before it goes live.2. Description If "Approval Workflows" are enabled (Team Plan feature), the "Publish" button changes to "Submit for Approval".3. Acceptance Criteria• Functional Logic:    ◦ Check: IF workspace.approval_required = TRUE.    ◦ UI Change: Replace "Schedule/Publish" button with "Submit for Approval".    ◦ Action:        ▪ Change Post Status to PENDING_APPROVAL.        ▪ Trigger Email Notification to users with role = APPROVER.    ◦ Locking: The post becomes read-only for the Creator until Approved or Rejected.PHASE 3: Advanced Enhancements (Agency Plan)CONT-P3-01 | Media Library Integration1. User Story As a user, I want to select an image from my Centralized Media Library, So that I can reuse brand assets without uploading them every time.2. Description Integration with the Global Media Library (Epic 14).3. Acceptance Criteria• Functional Logic:    ◦ Action: Click "Add Media" -> Select "From Library" tab.    ◦ Interface: Grid view of stored assets (filtered by workspace).    ◦ Selection: Click asset -> Attach to post.    ◦ Permissions: Agencies can see assets only for the current active WorkspaceScheduling & Publishing EngineSCHED-01 | Schedule Post (Date/Time Picker)1. User Story As a Creator, I want to schedule a post for a specific future date and time, So that I can plan my content delivery without being online at that exact moment.2. Description Located within the "Content Editor" (Epic 6). The user can toggle between "Publish Immediately" and "Schedule". This feature enforces the strict "15-minute future buffer" rule defined in the requirements to prevent backend processing conflicts.3. Acceptance Criteria• Functional Logic:    ◦ Toggle: User selects "Schedule" option.    ◦ Input: System presents a Date Picker and Time Picker.    ◦ Timezone: Display the Workspace Timezone (configured in Onboarding) for reference (e.g., "Scheduling in EST").    ◦ Validation (The 15-Minute Rule):        ▪ User cannot select a time less than 15 minutes from Current_Server_Time.        ▪ If user tries to select Now + 5 mins, the system auto-corrects or blocks the selection.    ◦ Action: Clicking "Schedule" saves the post with status SCHEDULED.• Field Matrix:Field LabelField TypePlaceholderMandatoryValidation / LogicPublish ActionRadio/Toggle"Publish Now" (Default)YesIf "Schedule" selected, reveal Date/Time fields.DateDate PickerMM/DD/YYYYYes (if Sched)Must be Today or Future.TimeTime PickerHH:MM AM/PMYes (if Sched)Must be > (Current Time + 15 mins).TimezoneRead-Only Texte.g. "America/New_York"N/APulled from Workspace Settings.• Error Scenarios:    ◦ Past Time: If user manually inputs a past date, show error: "Cannot schedule in the past."    ◦ Buffer Violation: If user selects a time 5 minutes from now, show error: "Posts must be scheduled at least 15 minutes in advance."• UI Elements:    ◦ Button: Label changes from "Publish" to "Schedule" when a date is selected.    ◦ Helper Text: "Your post will go live on [Date] at [Time] [Timezone]."SCHED-02 | Calendar View (Monthly Grid)1. User Story As a User, I want to view my scheduled posts on a monthly calendar grid, So that I can visualize my content gaps and cadence.2. Description A visual representation of the content queue. In Phase 1, this is primarily a View-Only interface (as per Kickoff Transcript: "Phase 1... just one single schedule... Phase 2... directly go to a calendar schedule").3. Acceptance Criteria• Functional Logic:    ◦ View: Display a standard Monthly Calendar Grid (Current Month).    ◦ Data Source: Fetch all posts with status SCHEDULED or PUBLISHED for the active Workspace.    ◦ Card Display: Inside the calendar cell (Day), show a small card for the post:        ▪ Icon: Platform (LinkedIn/X).        ▪ Time: e.g., "10:00 AM".        ▪ Preview: First 15-20 characters of text.    ◦ Navigation: Buttons for "Previous Month", "Next Month", "Today".    ◦ Click Action: Clicking a post card opens the Post Preview/Edit modal.• Field Matrix:    ◦ N/A (Visual Component)• Edge Cases:    ◦ Overflow: If a day has >3 posts, show "And 2 more..." link. Clicking it expands the day view.    ◦ Empty State: If no posts exist for the month, show an empty grid with a "Create Post" CTA button at the top.• UI Elements:    ◦ Header: "[Month] [Year]" (e.g., January 2026).    ◦ Legend: Color codes (e.g., Gray = Past/Published, Blue = Upcoming/Scheduled, Red = Failed).PUB-01 | Publishing Engine (FIFO & Retries)1. User Story As a System, I want to process the scheduled queue in First-In-First-Out (FIFO) order, So that posts are published reliably and API rate limits are respected.2. Description The backend "Cron" or "Worker" process. It handles the actual API calls to LinkedIn and X. It must handle the "Immediate" posts (queued with time=now) and "Scheduled" posts.3. Acceptance Criteria• Functional Logic:    ◦ Queue Polling: System checks the database every 1 minute (or appropriate interval) for posts where status = SCHEDULED AND scheduled_time <= Current_Time.    ◦ Ordering: Process oldest scheduled time first (FIFO).    ◦ Execution:        1. Fetch Access Token for the target platform (LinkedIn/X).        2. Send Payload (Text + Image URL).        3. On Success (200 OK): Update status to PUBLISHED. Capture platform_post_id (if available).        4. On Failure (4xx/5xx): Trigger Retry Logic.    ◦ Retry Logic (Req):        ▪ If failure is temporary (e.g., 500 Server Error, Timeout), retry up to 3 times with exponential backoff.        ▪ If failure is permanent (e.g., 401 Unauthorized, 400 Bad Request), mark as FAILED immediately.        ▪ After 3 failed retries, mark as FAILED.• Error Scenarios:    ◦ Token Expired (401): Mark as FAILED. Update Social Connection status to "Disconnected/Expired" (Triggers Epic 5 Alert).    ◦ Rate Limit Hit (429): Re-queue for +15 minutes.• UI Elements:    ◦ Backend Service - No UI.PUB-02 | Status Tracking & Failure Visibility1. User Story As a User, I want to clearly see if my post is Scheduled, Published, or Failed, So that I can take action if something goes wrong.2. Description Visual feedback in the "Content Library" or "Dashboard" list view. If a post fails, the user must see the reason (translated from raw API error to human text).3. Acceptance Criteria• Functional Logic:    ◦ Status Badges:        ▪ DRAFT (Gray): Saved but not queued.        ▪ SCHEDULED (Blue): In queue, waiting for time.        ▪ PUBLISHED (Green): Successfully sent to API.        ▪ FAILED (Red): API rejected the request.    ◦ Failure Detail (Req):        ▪ If Status = FAILED, the "View" button changes to "Fix & Retry".        ▪ Tooltip/Modal: Display the mapped error message.        ▪ Example: Map raw error code 324 from X to -> "Image too large (Max 5MB)."• Field Matrix:Field LabelField TypeValidation / LogicStatus BadgeUI TagDynamic based on DB status.Error MessageTooltipVisible only if Status = Failed.• UI Elements:    ◦ List Item: "[Post Text Preview]... [LinkedIn Icon]... [Green Badge: Published]"    ◦ Failed Item: "[Post Text Preview]... [X Icon]... [Red Badge: Failed]" -> Hover: "Error: Token Expired."• Quality Expectations:    ◦ Ensure the status updates automatically (or upon page refresh) after the backend engine processes the queue.Super Admin Console (Ops)PHASE 1: Core Support & Financial OpsFocus: Enabling the internal Cydra team to debug user issues and handle billing disputes manually during the initial launch.OPS-P1-01 | User & Workspace Lookup1. User Story As a Super Admin, I want to search for a user by email or workspace slug, So that I can view their current subscription status, credit balance, and connection health to resolve support tickets.2. Description The primary interface for customer support. Admin needs a "God View" of any specific user account to answer questions like "Why can't I post?" or "How many credits do I have left?".3. Acceptance Criteria• Functional Logic:    ◦ Search: Input accepts User Email, User Name, or Workspace Slug.    ◦ Results View:        ▪ User Details: Name, Email, Auth Provider (Google/LinkedIn), Account Created Date.        ▪ Workspace Details: Workspace Name, Plan Type (Solo), Status (Active/Past_Due), AI Credit Balance.        ▪ Social Connections: List connected platforms and their current Token Status (Active/Expired).    ◦ Actions: Buttons for "Impersonate" (OPS-P1-02) and "View Transactions" (OPS-P1-03).• Field Matrix:Field LabelPlaceholderMandatoryValidationSearch QueryEmail, Name, or SlugYesMin 3 characters.FilterUser / WorkspaceYesDefault: All.• Error Scenarios:    ◦ No Result: Show "No user or workspace found matching [Query]."    ◦ Multiple Results: Display list table if query matches multiple (e.g., "John").• UI Elements:    ◦ Header: "Customer Support Console"    ◦ Badges: Green (Active), Red (Past Due), Grey (Canceled).OPS-P1-02 | User Impersonation ("Log in as User")1. User Story As a Super Admin, I want to log in as a specific user without knowing their password, So that I can see exactly what they are seeing and replicate bugs.2. Description Critical debugging tool defined in Requirement Gathering. Allows Admin to inherit the user's session context temporarily.3. Acceptance Criteria• Functional Logic:    ◦ Trigger: Click "Impersonate" button on User Detail page (OPS-P1-01).    ◦ Security:        ▪ Log this event in admin_audit_logs (Admin ID, Target User ID, Timestamp).        ▪ Do not logout the actual user.    ◦ Session State:        ▪ Admin browser refreshes and loads the User's Dashboard.        ▪ Global Banner: Display sticky red header: "⚠ You are impersonating [User Name]. [Exit Impersonation]".    ◦ Exit: Clicking "Exit" returns Admin to the Super Admin Console.• Edge Cases:    ◦ Permissions: Impersonated session must respect the User's RBAC (e.g., if impersonating a Creator, Admin cannot see Billing).OPS-P1-03 | Manual Refund Processing1. User Story As a Super Admin, I want to process a refund for a specific transaction, So that I can resolve billing disputes or accidental charges.2. Description Interface interacting directly with Stripe API to reverse charges.3. Acceptance Criteria• Functional Logic:    ◦ Context: Accessed via "Transaction History" tab in User Lookup.    ◦ Action: Click "Refund" on a specific charge row.    ◦ Input: Select "Full Refund" or "Partial Refund" (enter amount).    ◦ Stripe Integration: Trigger Stripe Refund API.    ◦ System Action:        ▪ If Full Refund: Option to "Revoke Subscription immediately?" (Checkbox).        ▪ If checked, set subscription_status = CANCELED.    ◦ Logging: Save refund_reason and ticket_id to database.• Field Matrix:Field LabelField TypeMandatoryLogicRefund TypeDropdownYesFull / PartialAmountCurrencyYes (if Partial)Max = Original Charge AmountReason CodeDropdownYesDuplicate, Fraud, Customer Dissatisfaction, OtherTicket IDTextNoLink to Support Desk ticket• Error Scenarios:    ◦ Stripe Error: If charge is already refunded or too old, show API error message.PHASE 2: Operational OptimizationFocus: Advanced debugging tools for the Engineering/Ops team and safe feature rollouts.OPS-P2-01 | Publish Logs & Debugging1. User Story As a Super Admin, I want to view the raw API logs for a failed post, So that I can tell the user exactly why their LinkedIn or X post failed.2. Description Exposes the backend logs to the UI. Critical for diagnosing "Image too large" or "Token Scopes invalid" errors without querying the database directly.3. Acceptance Criteria• Functional Logic:    ◦ Location: "Recent Failures" tab in User Lookup.    ◦ Display: List of posts with status FAILED.    ◦ Action: Click "View Logs".    ◦ Content: Display JSON response from the provider (e.g., X API error: 324).    ◦ One-Click Retry: Admin button to "Force Retry" the post immediately.OPS-P2-02 | Feature Flag Management1. User Story As a Super Admin, I want to enable or disable specific features (e.g., "Instagram Publishing") for specific workspaces, So that I can beta test new features with a small group before general release.2. Description Safety mechanism for rolling out Phase 2/3 features (Roadmap Phase 2 Item).3. Acceptance Criteria• Functional Logic:    ◦ UI: "Feature Flags" tab in Admin Console.    ◦ Global Toggles: "Enable [Feature X] for All Users".    ◦ Whitelist: "Enable [Feature X] for these Workspace IDs: [List]".    ◦ System Behavior: Frontend checks flags on login to hide/show navigation items.PHASE 3: Scale & IntelligenceFocus: Business Intelligence and Platform Security.OPS-P3-01 | Revenue & Business Intelligence Dashboard1. User Story As a Super Admin/Founder, I want to view a dashboard of MRR, Churn, and Active Users, So that I can track the health of the business.2. Description Visualizing the business metrics defined in Roadmap Phase 3.3. Acceptance Criteria• Functional Logic:    ◦ Charts:        ▪ MRR (Monthly Recurring Revenue): Line chart over last 12 months.        ▪ Churn Rate: % of users canceling per month.        ▪ User Growth: New vs. Churned users.    ◦ Plan Distribution: Pie chart (Solo vs. Team vs. Agency).    ◦ Data Source: Aggregated from Stripe and User DB.OPS-P3-02 | Fraud & Risk Detection1. User Story As a Super Admin, I want to be alerted to suspicious activity (e.g., mass spam generation), So that I can suspend bad actors before they harm the platform's IP reputation.2. Description Automated risk detection (Roadmap Phase 3 Item).3. Acceptance Criteria• Functional Logic:    ◦ Triggers:        ▪ User generates >100 AI posts in 1 hour.        ▪ User receives >50 API failures (spamming) in 1 hour.    ◦ Action:        ▪ Flag Workspace as RISK_REVIEW.        ▪ Send Email Alert to Admins.    ◦ Admin UI: "Risk Queue" showing flagged accounts with "Suspend" or "Ignore" buttons.
